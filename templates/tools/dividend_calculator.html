<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>股息計算器 | Taiwan Stock Pro</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet" />
  <link href="{{ url_for('static', filename='style.css') }}" rel="stylesheet" />
  <link href="{{ url_for('static', filename='enhanced-ui.css') }}" rel="stylesheet" />
  <link href="{{ url_for('static', filename='mobile-responsive.css') }}" rel="stylesheet" />
</head>
<body>
  <nav class="enhanced-navbar">
    <div class="container-fluid">
      <div class="enhanced-navbar-content">
        <div class="enhanced-navbar-brand">
          <a href="{{ url_for('home') }}" class="brand-link">
            <div class="brand-icon"><i class="bi bi-graph-up-arrow"></i></div>
            <div class="brand-text">
              <span class="brand-name">Taiwan Stock</span>
              <span class="brand-subtitle">Pro</span>
            </div>
          </a>
        </div>
        <div class="enhanced-navbar-user">
          <a href="{{ url_for('home') }}" class="btn-enhanced btn-enhanced-ghost btn-enhanced-sm">
            <i class="bi bi-house"></i>
            <span class="d-none d-md-inline">首頁</span>
          </a>
        </div>
      </div>
    </div>
  </nav>

  <div class="container my-4">
    <div class="row justify-content-center">
      <div class="col-lg-8">
        <div class="card-enhanced animate-slide-in-up">
          <div class="card-enhanced-header d-flex align-items-center justify-content-between">
            <h5 class="mb-0 text-enhanced-primary" style="font-size: 1.125rem; font-weight: 600;">
              <i class="bi bi-calculator text-success me-2"></i>股息計算器
            </h5>
          </div>
          <div class="card-enhanced-body">
            <form method="POST" class="row g-3">
              <div class="col-sm-6">
                <label class="form-label">股價（元）</label>
                <input type="number" step="0.01" min="0" name="price" value="{{ defaults.price }}" class="form-control-enhanced" placeholder="例如 100" required />
              </div>
              <div class="col-sm-6">
                <label class="form-label">每股年股利（元）</label>
                <input type="number" step="0.01" min="0" name="annual_dividend" value="{{ defaults.annual_dividend }}" class="form-control-enhanced" placeholder="例如 5" required />
              </div>
              <div class="col-sm-6">
                <label class="form-label">配息頻率</label>
                <select name="payout_frequency" class="form-control-enhanced">
                  <option value="1" {% if defaults.payout_frequency=='1' %}selected{% endif %}>年配（每年一次）</option>
                  <option value="2" {% if defaults.payout_frequency=='2' %}selected{% endif %}>半年配（每年兩次）</option>
                  <option value="4" {% if defaults.payout_frequency=='4' %}selected{% endif %}>季配（每年四次）</option>
                  <option value="12" {% if defaults.payout_frequency=='12' %}selected{% endif %}>月配（每年十二次）</option>
                </select>
              </div>
              <div class="col-sm-6">
                <label class="form-label">持股數量（股）</label>
                <input type="number" step="1" min="0" name="shares" value="{{ defaults.shares }}" class="form-control-enhanced" placeholder="例如 1000" required />
              </div>
              <div class="col-sm-6">
                <label class="form-label">股利年成長率（%）</label>
                <input type="number" step="0.01" name="growth_rate" value="{{ defaults.growth_rate }}" class="form-control-enhanced" placeholder="例如 3" />
              </div>
              <div class="col-sm-6">
                <label class="form-label">模擬年數（年）</label>
                <input type="number" step="1" min="1" name="years" value="{{ defaults.years }}" class="form-control-enhanced" placeholder="例如 5" />
              </div>
              <div class="col-sm-6 d-flex align-items-end">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" name="reinvest" id="reinvest" {% if defaults.reinvest=='on' %}checked{% endif %} />
                  <label class="form-check-label" for="reinvest">股息再投入</label>
                </div>
              </div>
              <div class="col-12">
                <button class="btn-enhanced btn-enhanced-primary" type="submit">
                  <i class="bi bi-play-circle"></i>
                  <span>開始計算</span>
                </button>
              </div>
            </form>

            {% if result %}
            <hr class="my-4" />
            <div class="row g-3">
              <div class="col-md-4">
                <div class="data-card-enhanced">
                  <div class="data-label-enhanced">當年殖利率</div>
                  <div class="data-value-enhanced">{{ result.yield_percent }}%</div>
                </div>
              </div>
              <div class="col-md-4">
                <div class="data-card-enhanced">
                  <div class="data-label-enhanced">累積股利</div>
                  <div class="data-value-enhanced">{{ result.total_dividends }}</div>
                </div>
              </div>
              <div class="col-md-4">
                <div class="data-card-enhanced">
                  <div class="data-label-enhanced">期末持股</div>
                  <div class="data-value-enhanced">{{ result.final_shares }}</div>
                </div>
              </div>
            </div>

            <div class="card-enhanced mt-4">
              <div class="card-enhanced-header">
                <h6 class="mb-0">年度明細（{{ result.years }} 年）</h6>
              </div>
              <div class="card-enhanced-body p-0">
                <div class="table-responsive">
                  <table class="table-enhanced">
                    <thead>
                      <tr>
                        <th>年度</th>
                        <th class="text-end">每股股利</th>
                        <th class="text-end">當年領息</th>
                        <th class="text-end">新增股數</th>
                        <th class="text-end">期末股數</th>
                      </tr>
                    </thead>
                    <tbody>
                      {% for y in result.yearly %}
                      <tr>
                        <td>{{ y.year }}</td>
                        <td class="text-end">{{ y.dividend_per_share }}</td>
                        <td class="text-end">{{ y.cash_dividend }}</td>
                        <td class="text-end">{{ y.added_shares }}</td>
                        <td class="text-end">{{ y.ending_shares }}</td>
                      </tr>
                      {% endfor %}
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
            {% endif %}

          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>


